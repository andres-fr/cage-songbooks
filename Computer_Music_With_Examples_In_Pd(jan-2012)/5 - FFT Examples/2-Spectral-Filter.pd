#N canvas 621 156 1156 965 12;
#X obj 881 125 s \$0-gain;
#X obj 1003 757 loadbang;
#X msg 881 100 const \$1;
#X obj 697 131 hsl 100 12 0 1 0 0 empty nonjhjhfjghgdhj empty -2 -6
0 10 -204865 -220534 -1 6100 1;
#X obj 884 79 hsl 100 12 0 1 0 0 empty const empty -2 -6 0 10 -204786
-1 -1 9900 1;
#X text 36 308 0;
#X text 37 226 1;
#X text 52 322 0;
#X obj 53 232 cnv 15 510 88 empty empty empty 20 12 0 14 -262130 -66577
0;
#X text 182 209 Amplitude Filter;
#X text 844 50 Constant values to the table:;
#N canvas 111 106 987 758 Spectral-Filter 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 512 float 1;
#A 0 0 3.76701e-05 0.000150651 0.000338882 0.000602365 0.000941068
0.00135493 0.00184387 0.00240785 0.00304675 0.00376052 0.004549 0.0054121
0.00634965 0.00736159 0.00844771 0.00960782 0.0108418 0.0121495 0.0135306
0.014985 0.0165124 0.0181127 0.0197855 0.0215306 0.0233478 0.0252367
0.0271972 0.0292289 0.0313314 0.0335046 0.035748 0.0380613 0.0404442
0.0428963 0.0454172 0.0480066 0.050664 0.0533891 0.0561815 0.0590407
0.0619664 0.0649579 0.0680151 0.0711372 0.074324 0.0775748 0.0808893
0.0842669 0.0877071 0.0912094 0.0947732 0.0983981 0.102083 0.105829
0.109633 0.113497 0.117418 0.121398 0.125434 0.129527 0.133675 0.137879
0.142137 0.146449 0.150814 0.155232 0.159702 0.164223 0.168795 0.173416
0.178087 0.182806 0.187573 0.192387 0.197247 0.202153 0.207104 0.212099
0.217137 0.222218 0.22734 0.232504 0.237708 0.242952 0.248234 0.253554
0.258911 0.264305 0.269734 0.275198 0.280695 0.286226 0.291789 0.297383
0.303007 0.308662 0.314345 0.320056 0.325794 0.331559 0.337348 0.343163
0.349001 0.354861 0.360744 0.366647 0.372571 0.378514 0.384475 0.390453
0.396448 0.402459 0.408484 0.414523 0.420575 0.426639 0.432714 0.438799
0.444893 0.450996 0.457106 0.463222 0.469344 0.47547 0.481601 0.487734
0.493868 0.500004 0.50614 0.512275 0.518408 0.524538 0.530665 0.536787
0.542903 0.549013 0.555116 0.56121 0.567295 0.57337 0.579434 0.585485
0.591524 0.59755 0.60356 0.609555 0.615534 0.621495 0.627437 0.633361
0.639264 0.645147 0.651007 0.656845 0.66266 0.668449 0.674214 0.679952
0.685663 0.691346 0.697001 0.702625 0.708219 0.713782 0.719313 0.72481
0.730274 0.735703 0.741096 0.746453 0.751774 0.757056 0.762299 0.767503
0.772667 0.777789 0.78287 0.787908 0.792903 0.797854 0.80276 0.80762
0.812434 0.817201 0.82192 0.82659 0.831212 0.835783 0.840304 0.844774
0.849192 0.853557 0.857869 0.862127 0.866331 0.870479 0.874572 0.878608
0.882587 0.886509 0.890372 0.894177 0.897922 0.901607 0.905232 0.908796
0.912298 0.915738 0.919115 0.92243 0.925681 0.928867 0.931989 0.935046
0.938038 0.940963 0.943823 0.946615 0.94934 0.951997 0.954586 0.957107
0.959559 0.961942 0.964255 0.966499 0.968672 0.970774 0.972806 0.974766
0.976655 0.978472 0.980217 0.98189 0.98349 0.985017 0.986471 0.987852
0.98916 0.990394 0.991554 0.99264 0.993652 0.994589 0.995452 0.996241
0.996954 0.997593 0.998157 0.998646 0.999059 0.999398 0.999661 0.99985
0.999962 1 0.999962 0.999849 0.999661 0.999398 0.999059 0.998645 0.998156
0.997592 0.996953 0.99624 0.995451 0.994588 0.993651 0.992639 0.991553
0.990393 0.989159 0.987851 0.98647 0.985016 0.983488 0.981888 0.980215
0.97847 0.976653 0.974764 0.972804 0.970772 0.96867 0.966496 0.964253
0.96194 0.959557 0.957105 0.954584 0.951995 0.949337 0.946612 0.94382
0.940961 0.938035 0.935044 0.931987 0.928864 0.925678 0.922427 0.919113
0.915735 0.912295 0.908793 0.905229 0.901604 0.897919 0.894174 0.890369
0.886506 0.882584 0.878605 0.874569 0.870476 0.866328 0.862124 0.857866
0.853554 0.849189 0.844771 0.840301 0.83578 0.831208 0.826587 0.821916
0.817197 0.81243 0.807616 0.802756 0.79785 0.7929 0.787905 0.782867
0.777786 0.772663 0.7675 0.762296 0.757052 0.75177 0.74645 0.741093
0.735699 0.73027 0.724806 0.719309 0.713778 0.708215 0.702621 0.696997
0.691342 0.685659 0.679948 0.67421 0.668445 0.662656 0.656841 0.651003
0.645143 0.63926 0.633357 0.627433 0.62149 0.615529 0.609551 0.603556
0.597546 0.59152 0.585481 0.579429 0.573365 0.567291 0.561206 0.555111
0.549009 0.542899 0.536782 0.530661 0.524534 0.518404 0.512271 0.506136
0.5 0.493864 0.487729 0.481596 0.475466 0.46934 0.463218 0.457101 0.450991
0.444889 0.438795 0.432709 0.426635 0.420571 0.414519 0.40848 0.402455
0.396444 0.390449 0.384471 0.37851 0.372567 0.366643 0.36074 0.354857
0.348997 0.343159 0.337344 0.331555 0.32579 0.320052 0.314341 0.308658
0.303003 0.297379 0.291785 0.286222 0.280691 0.275194 0.26973 0.264301
0.258907 0.25355 0.24823 0.242948 0.237705 0.232501 0.227337 0.222214
0.217133 0.212095 0.2071 0.20215 0.197244 0.192383 0.18757 0.182803
0.178084 0.173413 0.168791 0.16422 0.159699 0.155229 0.150811 0.146446
0.142134 0.137876 0.133672 0.129524 0.125431 0.121395 0.117416 0.113494
0.109631 0.105826 0.102081 0.0983955 0.0947706 0.0912068 0.0877046
0.0842645 0.0808869 0.0775725 0.0743217 0.071135 0.0680129 0.0649558
0.0619642 0.0590387 0.0561795 0.0533872 0.0506621 0.0480047 0.0454154
0.0428945 0.0404424 0.0380596 0.0357464 0.033503 0.0313299 0.0292274
0.0271958 0.0252354 0.0233465 0.0215293 0.0197842 0.0181115 0.0165113
0.0149839 0.0135296 0.0121485 0.0108409 0.00960699 0.0084469 0.00736085
0.00634897 0.00541145 0.0045484 0.00375998 0.00304627 0.00240743 0.00184351
0.0013546 0.0009408 0.000602156 0.000338733 0.000150532 3.76105e-05
;
#X coords 0 1 511 0 200 120 1;
#X restore 477 92 graph;
#X text 544 29 Block & Overlaps;
#X obj 214 260 cnv 15 500 120 empty empty empty 20 12 0 14 -262130
-66577 0;
#X obj 558 57 block~ 512 4;
#X obj 230 130 *~;
#X obj 230 51 inlet~;
#X obj 230 159 rfft~;
#X obj 248 101 tabreceive~ \$0-hann;
#X text 281 158 FFT;
#X text 145 193 real;
#X obj 229 312 *~;
#X obj 280 312 *~;
#X obj 298 266 tabreceive~ \$0-gain;
#X text 263 129 * Hann Window;
#X text 272 185 imaginary;
#X text 316 319 This changes the amplitudes of every Cosine & Sine
Component.;
#N canvas 335 602 525 497 plot 0;
#X obj 65 34 inlet~;
#X obj 126 34 inlet~;
#X obj 224 165 metro 100;
#X obj 272 130 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 71 227 tabwrite~ fft;
#X obj 193 227 tabwrite~ filtered-fft;
#X obj 66 107 cartopol~;
#X obj 188 88 cartopol~;
#X obj 195 33 inlet~;
#X obj 257 43 inlet~;
#X obj 275 99 loadbang;
#X connect 0 0 6 0;
#X connect 1 0 6 1;
#X connect 2 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 6 0 4 0;
#X connect 7 0 5 0;
#X connect 8 0 7 0;
#X connect 9 0 7 1;
#X connect 10 0 3 0;
#X restore 101 402 pd plot;
#X obj 230 574 *~;
#X obj 248 547 tabreceive~ \$0-hann;
#X obj 229 481 rifft~;
#X obj 230 654 outlet~;
#X text 284 481 inverse FFT;
#X text 263 577 * Hann Window;
#X text 285 617 Normalizing;
#X text 368 616 (window * 3/2);
#X text 316 298 Multiply by values from the "Amplitude Filter" table.
;
#X obj 230 616 /~ 768;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 10 0;
#X connect 6 0 16 0;
#X connect 6 1 11 0;
#X connect 6 1 16 1;
#X connect 7 0 4 1;
#X connect 10 0 16 2;
#X connect 10 0 19 0;
#X connect 11 0 16 3;
#X connect 11 0 19 1;
#X connect 12 0 11 1;
#X connect 12 0 10 1;
#X connect 17 0 26 0;
#X connect 18 0 17 1;
#X connect 19 0 17 0;
#X connect 26 0 20 0;
#X restore 648 93 pd Spectral-Filter;
#N canvas 0 22 237 305 gain 0;
#X obj 79 176 *~;
#X obj 67 208 dac~;
#X obj 108 146 line~;
#X msg 108 120 \$1 10;
#X obj 108 94 pow 4;
#X obj 108 67 inlet;
#X obj 79 36 inlet~;
#X connect 0 0 1 0;
#X connect 0 0 1 1;
#X connect 2 0 0 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 6 0 0 0;
#X restore 648 156 pd gain;
#X text 526 320 Nyquist;
#X obj 50 54 cnv 15 510 118 empty empty empty 20 12 0 14 -261682 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array fft 256 float 1;
#A 0 1.82897 3.47956 3.70373 9.50438 7.2599 4.44044 5.94861 9.44385
4.79424 9.84272 9.72789 0.88152 0.982599 6.27029 9.5515 7.72181 2.18611
1.96451 5.85521 8.60204 5.2252 5.83503 15.1903 14.1686 3.47 1.97095
2.8519 10.3542 12.6426 11.5402 6.48015 3.88278 3.60769 3.85172 2.69888
8.67727 4.86037 7.83448 1.78475 6.42839 7.18828 5.36089 6.96053 4.39985
2.58302 4.02594 5.6333 7.12125 7.67335 12.5606 15.3006 5.76367 7.23109
10.1879 7.2632 5.51879 1.96044 11.2494 12.2068 7.0573 9.00623 5.17992
6.44506 8.61484 14.2226 5.30697 9.57923 9.64703 1.4218 7.66287 5.9141
7.89365 7.9167 5.6734 5.06989 5.79419 9.87218 15.7379 12.5389 8.03829
2.10843 1.35223 7.70631 12.5495 6.15286 7.0019 6.80124 8.21148 7.66935
5.04321 7.50587 0.729128 6.30906 6.61464 5.92209 4.8791 6.60464 3.33278
6.70192 5.06895 9.91134 11.5617 1.48716 7.6501 7.30643 13.5602 15.1216
6.1676 2.61251 2.52817 5.83579 5.48866 5.09303 4.37969 8.47009 7.17651
9.4889 8.32352 4.02147 9.60646 5.30811 5.28806 4.39195 4.53511 12.6119
12.4026 2.63318 2.3614 2.68284 2.78846 5.30062 7.87293 3.7901 8.75088
5.00052 2.24714 5.91335 6.28726 4.4888 7.38005 7.93484 6.43607 7.52577
12.6252 15.2409 4.91192 3.97759 2.5804 1.32757 2.38305 3.40285 5.73962
9.54281 2.00652 11.8889 12.5108 4.8328 6.77515 10.9784 7.81731 4.06766
5.75526 4.47051 8.76429 6.08142 3.85899 6.99832 10.2127 10.6907 9.3388
6.95254 9.2293 14.19 16.7194 9.31426 1.72908 3.4424 0.917545 1.19367
3.41552 4.65139 6.79717 15.1141 7.85071 1.09321 2.33627 9.89689 14.1388
9.79846 4.89733 3.35696 9.36005 9.0836 6.01741 4.94716 6.91299 9.08114
13.3003 6.46886 4.40034 7.80912 3.56427 3.53988 5.53972 5.52067 8.91861
16.3787 14.9216 7.29801 2.93136 3.67408 5.97055 7.85993 11.9876 16.297
9.75834 5.20151 10.0764 11.8467 10.0548 8.15811 3.74583 4.986 5.25473
5.09726 9.58601 9.333 9.81185 7.62383 9.5117 14.2601 15.9058 8.1243
14.0701 15.5701 8.16066 7.5765 11.9247 11.831 10.2391 8.06686 7.83094
6.93657 8.71648 12.5586 9.14767 16.6017 6.98559 10.5539 10.8732 2.63704
10.4066 7.45797 3.36957 4.57338 12.8354;
#X coords 0 25 255 -0.01 512 120 1;
#X restore 49 53 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-gain 256 float 0;
#X coords 0 1.05 255 -0.02 512 90 1;
#X restore 52 231 graph;
#X text 47 178 0;
#X text 521 176 Nyquist;
#X obj 55 376 cnv 15 510 118 empty empty empty 20 12 0 14 -228647 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array filtered-fft 256 float 1;
#A 0 1.82897 3.47956 3.70373 9.50438 7.2599 4.44044 5.94861 9.44385
4.79424 9.84272 9.72789 0.88152 0.982599 6.27029 9.5515 7.72181 2.18611
1.96451 5.85521 8.60204 5.2252 5.83503 15.1903 14.1686 3.47 1.97095
2.8519 10.3542 12.6426 11.5402 6.48015 3.88278 3.60769 3.85172 2.69888
8.67727 4.86037 7.83448 1.78475 6.42839 7.18828 5.36089 6.96053 4.39985
2.58302 4.02594 5.6333 7.12125 7.67335 12.5606 15.3006 5.76367 7.23109
10.1879 7.2632 5.51879 1.96044 11.2494 12.2068 7.0573 9.00623 5.17992
6.44506 8.61484 14.2226 5.30697 9.57923 9.64703 1.4218 7.66287 5.9141
7.89365 7.9167 5.6734 5.06989 5.79419 9.87218 15.7379 12.5389 8.03829
2.10843 1.35223 7.70631 12.5495 6.15286 7.0019 6.80124 8.21148 7.66935
5.04321 7.50587 0.729128 6.30906 6.61464 5.92209 4.8791 6.60464 3.33278
6.70192 5.06895 9.91134 11.5617 1.48716 7.6501 7.30643 13.5602 15.1216
6.1676 2.61251 2.52817 5.83579 5.48866 5.09303 4.37969 8.47009 7.17651
9.4889 8.32352 4.02147 9.60646 5.30811 5.28806 4.39195 4.53511 12.6119
12.4026 2.63318 2.3614 2.68284 2.78846 5.30062 7.87293 3.7901 8.75088
5.00052 2.24714 5.91335 6.28726 4.4888 7.38005 7.93484 6.43607 7.52577
12.6252 15.2409 4.91192 3.97759 2.5804 1.32757 2.38305 3.40285 5.73962
9.54281 2.00652 11.8889 12.5108 4.8328 6.77515 10.9784 7.81731 4.06766
5.75526 4.47051 8.76429 6.08142 3.85899 6.99832 10.2127 10.6907 9.3388
6.95254 9.2293 14.19 16.7194 9.31426 1.72908 3.4424 0.917545 1.19367
3.41552 4.65139 6.79717 15.1141 7.85071 1.09321 2.33627 9.89689 14.1388
9.79846 4.89733 3.35696 9.36005 9.0836 6.01741 4.94716 6.91299 9.08114
13.3003 6.46886 4.40034 7.80912 3.56427 3.53988 5.53972 5.52067 8.91861
16.3787 14.9216 7.29801 2.93136 3.67408 5.97055 7.85993 11.9876 16.297
9.75834 5.20151 10.0764 11.8467 10.0548 8.15811 3.74583 4.986 5.25473
5.09726 9.58601 9.333 9.81185 7.62383 9.5117 14.2601 15.9058 8.1243
14.0701 15.5701 8.16066 7.5765 11.9247 11.831 10.2391 8.06686 7.83094
6.93657 8.71648 12.5586 9.14767 16.6017 6.98559 10.5539 10.8732 2.63704
10.4066 7.45797 3.36957 4.57338 12.8354;
#X coords 0 50 255 0 512 120 1;
#X restore 54 375 graph;
#X text 47 502 0;
#X text 533 500 Nyquist;
#X text 649 210 Here we have the object [noise~] (a white noise generator)
being analyzed. White noise has energy all over the spectrum. Check
the first table above \, it's the raw FFT data with amplitudes from
0Hz until the Nyquist Frequency.;
#X text 646 416 Open the above subpatch (Spectral-Filter) and see that
it resembles a lot the example 4 from the FFT folder (iFFT & Window).
See that it's quite the same \, but now we performed a manipulation
with the signal in the frequency domain! And it's quite simple \, we
just multiply the FFT block to the Amplitude Filter Table.;
#X obj 114 693 Uzi;
#X obj 138 751 - 1;
#X obj 114 665 trigger float bang;
#X obj 114 636 nbx 5 14 0 256 0 0 empty empty empty 0 -8 0 10 -204800
-1 -1 0 256;
#X msg 179 783 const 0;
#X obj 138 822 s \$0-gain;
#X msg 138 783 \$1 1;
#X text 177 632 Low Pass;
#X obj 299 698 Uzi;
#X obj 323 756 - 1;
#X obj 299 670 trigger float bang;
#X obj 299 641 nbx 5 14 0 256 0 0 empty empty empty 0 -8 0 10 -204800
-1 -1 0 256;
#X obj 323 827 s \$0-gain;
#X msg 323 788 \$1 0;
#X msg 364 788 const 1;
#X text 364 638 High Pass;
#X obj 693 880 tabwrite \$0-gain;
#X obj 524 802 expr if ($f1 < $f2 - $f3 \, 0 \, if ($f1 > $f2 + $f3
\, 0 \, 1)) \; $f1;
#X obj 690 676 t b f;
#X obj 691 650 f;
#X obj 888 679 t b f;
#X text 506 681 Band Pass;
#X text 861 627 Band size;
#X msg 506 718 256;
#X obj 506 744 Uzi;
#X obj 648 45 noise~;
#X obj 524 775 - 1;
#X obj 691 628 nbx 5 14 0 256 0 0 empty empty empty 0 -8 0 10 -204800
-1 -1 0 256;
#X obj 888 655 nbx 2 14 0 99 0 0 empty empty empty 0 -8 0 10 -204800
-1 -1 0 256;
#X text 646 296 In the [Spectral-Filter] subpatch \, we multiply every
Cosine and Sine Amplitude by the "Amplitude Filter" table in the middle.
above table. If a value from this table is zero \, we do eliminate
that frequency component from the white noise \, thus \, filtering
it. Move the mouse to redraw the table and see what happens with the
result on the bottom table. Be careful to not move it out the table
bounds.;
#X text 687 593 Band Bass;
#X text 207 581 Here are some loops that generate filters:;
#X msg 1003 783 \; pd dsp 1 \; const 1;
#X connect 1 0 57 0;
#X connect 2 0 0 0;
#X connect 3 0 12 1;
#X connect 4 0 2 0;
#X connect 11 0 12 0;
#X connect 25 2 26 0;
#X connect 26 0 31 0;
#X connect 27 0 25 0;
#X connect 27 1 29 0;
#X connect 28 0 27 0;
#X connect 29 0 30 0;
#X connect 31 0 30 0;
#X connect 33 2 34 0;
#X connect 34 0 38 0;
#X connect 35 0 33 0;
#X connect 35 1 39 0;
#X connect 36 0 35 0;
#X connect 38 0 37 0;
#X connect 39 0 37 0;
#X connect 42 0 41 0;
#X connect 42 1 41 1;
#X connect 43 0 48 0;
#X connect 43 1 42 1;
#X connect 44 0 43 0;
#X connect 45 0 44 0;
#X connect 45 1 42 2;
#X connect 48 0 49 0;
#X connect 49 2 51 0;
#X connect 50 0 11 0;
#X connect 51 0 42 0;
#X connect 52 0 44 0;
#X connect 53 0 45 0;
